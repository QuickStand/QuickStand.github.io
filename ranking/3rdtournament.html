<!DOCTYPE html>
<html>
   <head>
     <meta charset="UTF-8">
     <link rel="stylesheet" href="../style.css">
     <script type="text/javascript" src="tournaments/hfs23.json"></script> 
     <script type="text/javascript" src="tournaments/hfs22.json"></script>
     <script type="text/javascript" src="tournaments/hfs19.json"></script> 
     <script type="text/javascript" src="tournaments/hfsreborn.json"></script>
     <script type="text/javascript" src="tournaments/mixup22.json"></script> 
     <script type="text/javascript" src="tournaments/pbn3.json"></script> 
     <script type="text/javascript" src="tournaments/pbn2.json"></script> 
     <script type="text/javascript" src="tournaments/pbn1.json"></script> 
     <script type="text/javascript" src="tournaments/judgement2.json"></script> 
     <script type="text/javascript" src="tournaments/judgement1.json"></script> 
     <script type="text/javascript" src="tournaments/saf19.json"></script> 
     <script type="text/javascript" src="tournaments/stunfest22.json"></script> 
     <script type="text/javascript" src="tournaments/stunfest19.json"></script> 
     <script type="text/javascript" src="points.json"></script> 
     <script type="text/javascript" src="player_profiles.json"></script>
    <script type="text/javascript" src="ranking.js"></script>
   </head>
   <body onload="tournament_url();">

   <div id="card">
   
      <h1 id="name"></h1>

      <p>
         <h2 id="type" class="left"></h2>
         <h2 id="date" class="right"></h2>
     </p>

     <p>
         <h2 id="bracket" class="left"></h2>
         <h2 id="vod" class="right"></h2>
     </p>

      <p><b id="t_org"></b><span id="org"></span></p>

      <p><span id="note"></span></p>

      <table class="center">
         <tbody id="results">
         </tbody>
      </table>
   </div>  

   <script>
// drawing the tournament page
function draw_tournament(tournament) {
    document.getElementById("name").innerHTML = tournament["name"];
    document.getElementById("type").innerHTML = type_to_string(tournament["type"]);
    document.getElementById("date").innerHTML = tournament["month"] + " " + tournament["year"];
    const orgs = print_orgs(tournament["org"],tournament["org_link"]);
    if (orgs != "") {
        document.getElementById("t_org").innerHTML = "Organizer: ";
        document.getElementById("org").innerHTML = orgs; }
    document.getElementById("bracket").innerHTML = html_link(tournament["bracket"],"Bracket");
    if (tournament["vod"] != null) {document.getElementById("vod").innerHTML = html_link(tournament["vod"],"VOD");}
    if (tournament["note"] != null) {document.getElementById("note").innerHTML = tournament["note"];}
    const results = document.getElementById("results");
    
    // print the result list
    for (const player_name in tournament["results"]) {
        let tr = document.createElement("tr");
        let td_rank = document.createElement("td");
        td_rank.innerHTML = ordinal(tournament["results"][player_name]);
        tr.appendChild(td_rank);
        let td_player = document.createElement("td");
        td_player.innerHTML = player_link(player_name);
        tr.appendChild(td_player);
        let td_flag = document.createElement("td");
        td_flag.innerHTML = player_flags(player_name);
        tr.appendChild(td_flag);
        
        results.appendChild(tr);
    }
}

// drawing tournament depending on the url argument
function tournament_url () {
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const param = urlParams.get("t");
    if (param != null) {
        for (const t of tournaments) {
            if (param == t["shortname"]) {
                draw_tournament(t);
            }
        }
    }
    return 0;
}
   </script>

   </body>
</html>
